#!/bin/bash

set -e

lib_dir="${BASH_SOURCE%/*}/../lib"
source "$lib_dir/shared/utils.sh"

display_help() {
    cat << EOF
mgc: A tool to manage multiple SSH and Git configurations.

Usage:
  mgc <command> [arguments]

Commands:
  create   Create a new profile with specific SSH key, email, and username.
  switch   Switch to a specified profile.
  list     List all available profiles.
  remove   Remove an existing profile.
  help     Display this help information.

Examples:
  mgc create profileName --ssh-key ~/.ssh/id_rsa_profileName --email user@example.com --username username
  mgc switch profileName
  mgc list
  mgc remove profileName

For more information on a specific command, type 'mgc <command> --help'.
EOF
}

case "$1" in
    create)
        source "$lib_dir/create.sh" "${@:2}"
        ;;
    switch)
        source "$lib_dir/switch.sh" "${@:2}"
        ;;
    list)
        source "$lib_dir/list.sh" "${@:2}"
        ;;
    remove)
        source "$lib_dir/remove.sh" "${@:2}"
        ;;
    help)
        display_help
        ;;
    *)
        if [ ! -z "$1" ]; then
            echo "Unknown command: $1"
        fi
        display_help
        exit 1
        ;;
esac
